<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Painel de LED</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        h1 {
            color: #d00;
            margin-top: 40px;
        }
        .container {
            background: #fff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-top: 30px;
            min-width: 320px;
        }
        label {
            display: block;
            margin-top: 18px;
            font-weight: bold;
        }
        input[type="number"] {
            width: 100%;
            padding: 8px;
            margin-top: 6px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
        button {
            margin-top: 24px;
            padding: 10px 24px;
            background: #003366;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 1.1em;
            cursor: pointer;
        }
        #resultado {
            margin-top: 28px;
            font-size: 1.2em;
            color: #003366;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>CalcPixels</h1>
    <div class="container">
        <form id="form-calc" onsubmit="return false;">
            <label>Gabinete:</label>
            <select id="gabinete-select" onchange="toggleManualInputs()" required>
                <optgroup label="P3.9">
                    <option value="128x256">P3.9 0.5x1 (128x256)</option>
                    <option value="128x128">P3.9 0.5x0.5 (128x128)</option>
                </optgroup>
                <optgroup label="P2.x">
                    <option value="192x192">P2.5 0.5x0.5 (192x192)</option>
                    <option value="256x256">P2.0 0.5x0.5 (256x256)</option>
                </optgroup>
                <optgroup label="P2.9">
                    <option value="168x168">P2.9 0.5x0.5 (168x168)</option>
                    <option value="336x168">P2.9 1x0.5 (336x168)</option>
                </optgroup>
                <optgroup label="P5">
                    <option value="192x192">P5 0.96x0.96 (192x192)</option>
                    <option value="128x128">P5 0.64x0.64 (128x128)</option>
                </optgroup>
                <optgroup label="P6">
                    <option value="160x160">P6 0.96x0.96 (160x160)</option>
                    <option value="96x96">P6 0.576x0.576 (96x96)</option>
                </optgroup>
                <optgroup label="P10">
                    <option value="96x96">P10 0.96x0.96 (96x96)</option>
                </optgroup>
                <optgroup label="Manual">
                    <option value="manual">Manual</option>
                </optgroup>
            </select>
            <div id="manual-inputs" style="display:none;">
                <input type="number" id="pixels-largura" placeholder="Largura (px)" min="1">
                <input type="number" id="pixels-altura" placeholder="Altura (px)" min="1">
            </div>
            <div style="display: flex; align-items: center; gap: 8px; margin-top: 18px;">
                <label for="tipo-quantidade" style="margin: 0; font-weight: bold;">Quantidade de:</label>
                <select id="tipo-quantidade" onchange="toggleTipoQuantidade()" required style="margin: 0;">
                    <option value="gabinetes">Gabinetes:</option>
                    <option value="metros">Metros:</option>
                </select>
            </div>
            <div id="qtd-gabinetes">
                <label>Quantidade de gabinetes:</label>
                <input type="number" id="qtd-largura" placeholder="Largura (qtd)" min="1" required>
                <input type="number" id="qtd-altura" placeholder="Altura (qtd)" min="1" required>
            </div>
            <div id="qtd-metros" style="display:none;">
                <label>Dimensões em metros:</label>
                <input type="number" id="metros-largura" placeholder="Largura (m)" min="0.01" step="0.01">
                <input type="number" id="metros-altura" placeholder="Altura (m)" min="0.01" step="0.01">
            </div>
            <button type="submit" onclick="calcularPainel()">Calcular</button>
        </form>
        <div id="resultado"></div>
    </div>
    <script>
        function toggleManualInputs() {
            const gabinete = document.getElementById('gabinete-select').value;
            const manualInputs = document.getElementById('manual-inputs');
            if (gabinete === 'manual') {
                manualInputs.style.display = 'block';
                document.getElementById('pixels-largura').required = true;
                document.getElementById('pixels-altura').required = true;
            } else {
                manualInputs.style.display = 'none';
                document.getElementById('pixels-largura').required = false;
                document.getElementById('pixels-altura').required = false;
            }
        }

        function toggleTipoQuantidade() {
            const tipo = document.getElementById('tipo-quantidade').value;
            if (tipo === 'gabinetes') {
                document.getElementById('qtd-gabinetes').style.display = 'block';
                document.getElementById('qtd-metros').style.display = 'none';
                document.getElementById('qtd-largura').required = true;
                document.getElementById('qtd-altura').required = true;
                document.getElementById('metros-largura').required = false;
                document.getElementById('metros-altura').required = false;
            } else {
                document.getElementById('qtd-gabinetes').style.display = 'none';
                document.getElementById('qtd-metros').style.display = 'block';
                document.getElementById('qtd-largura').required = false;
                document.getElementById('qtd-altura').required = false;
                document.getElementById('metros-largura').required = true;
                document.getElementById('metros-altura').required = true;
            }
        }

        function calcularPainel() {
            const gabinete = document.getElementById('gabinete-select').value;
            let pxLarg, pxAlt;
            if (gabinete === 'manual') {
                pxLarg = parseInt(document.getElementById('pixels-largura').value, 10);
                pxAlt = parseInt(document.getElementById('pixels-altura').value, 10);
            } else {
                const partes = gabinete.split('x');
                pxLarg = parseInt(partes[0], 10);
                pxAlt = parseInt(partes[1], 10);
            }
            let qtdLarg, qtdAlt;
            const tipo = document.getElementById('tipo-quantidade').value;
            if (tipo === 'gabinetes') {
                qtdLarg = parseInt(document.getElementById('qtd-largura').value, 10);
                qtdAlt = parseInt(document.getElementById('qtd-altura').value, 10);
            } else {
                // Definir tamanhos físicos dos gabinetes (em metros)
                const tamanhosGabinetes = {
                    '128x256': {larg: 0.5, alt: 1},
                    '128x128': {larg: 0.5, alt: 0.5},
                    '192x192': {larg: 0.5, alt: 0.5},
                    '256x256': {larg: 0.5, alt: 0.5},
                    '168x168': {larg: 0.5, alt: 0.5},
                    '336x168': {larg: 1, alt: 0.5},
                    '192x192_P5': {larg: 0.96, alt: 0.96},
                    '128x128_P5': {larg: 0.64, alt: 0.64},
                    '160x160': {larg: 0.96, alt: 0.96},
                    '96x96_P6': {larg: 0.576, alt: 0.576},
                    '96x96': {larg: 0.96, alt: 0.96},
                };
                let gabineteLargM, gabineteAltM;
                if (gabinete === 'manual') {
                    document.getElementById('resultado').textContent = 'Para cálculo por metros, selecione um gabinete pré-definido.';
                    return;
                } else {
                    let key = gabinete;
                    if (gabinete === '192x192' && document.getElementById('gabinete-select').selectedOptions[0].text.includes('P5')) key = '192x192_P5';
                    if (gabinete === '128x128' && document.getElementById('gabinete-select').selectedOptions[0].text.includes('P5')) key = '128x128_P5';
                    if (gabinete === '96x96' && document.getElementById('gabinete-select').selectedOptions[0].text.includes('P6')) key = '96x96_P6';
                    gabineteLargM = tamanhosGabinetes[key]?.larg;
                    gabineteAltM = tamanhosGabinetes[key]?.alt;
                }
                const metrosLarg = parseFloat(document.getElementById('metros-largura').value);
                const metrosAlt = parseFloat(document.getElementById('metros-altura').value);
                if (!gabineteLargM || !gabineteAltM) {
                    document.getElementById('resultado').textContent = 'Selecione um gabinete com tamanho físico definido para calcular por metros.';
                    return;
                }
                qtdLarg = Math.ceil(metrosLarg / gabineteLargM);
                qtdAlt = Math.ceil(metrosAlt / gabineteAltM);
            }

            if (isNaN(pxLarg) || isNaN(pxAlt) || isNaN(qtdLarg) || isNaN(qtdAlt)) {
                document.getElementById('resultado').textContent = 'Por favor, preencha todos os campos corretamente.';
                return;
            }

            const totalLarg = pxLarg * qtdLarg;
            const totalAlt = pxAlt * qtdAlt;
            const totalPixels = totalLarg * totalAlt;
            const pixelsPorPorta = 650000;
            const portasNecessarias = Math.ceil(totalPixels / pixelsPorPorta);

            // Função para calcular o MDC (máximo divisor comum)
            function mdc(a, b) {
                return b === 0 ? a : mdc(b, a % b);
            }
            const divisor = mdc(totalLarg, totalAlt);
            const proporcaoLarg = totalLarg / divisor;
            const proporcaoAlt = totalAlt / divisor;

            document.getElementById('resultado').innerHTML =
                `Resolução total do painel: <b>${totalLarg} x ${totalAlt} pixels</b><br>` +
                `Proporção: <b>${proporcaoLarg}:${proporcaoAlt}</b><br>` +
                `Pixels totais do projeto: <b>${totalPixels.toLocaleString('pt-BR')}</b><br>` +
                `Quantidade de portas necessárias da processadora: <b>${portasNecessarias}</b>`;
        }
    </script>
</body>
</html> 